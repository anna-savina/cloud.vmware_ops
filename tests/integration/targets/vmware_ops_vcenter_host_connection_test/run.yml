- hosts: localhost
  gather_facts: no
  collections:
    - community.general

  tasks:
    - name: Import eco-vcenter credentials
      ansible.builtin.include_vars:
        file: ../../integration_config.yml
      tags: eco-vcenter-ci

    # File stored common for all tests specific vcenter settings
    # and encrypted with ansible vault 
    # use ansible-vault edit command to modify the file
    # password is vcenter_password
    # see group_vars.yml.tpl for details
    - name: Import common vars
      ansible.builtin.include_vars:
        file: ../group_vars.yml
      tags: eco-vcenter-ci

    - name: Import simulator vars
      ansible.builtin.include_vars:
        file: vars.yml
      tags: integration-ci

    - name: Vcsim
      ansible.builtin.import_role:
        name: prepare_soap
      tags: integration-ci

    - name: ESXi
      ansible.builtin.import_role:
        name: prepare_esx
      tags: integration-ci

    - name: Import vcenter_host_connection_test
      ansible.builtin.include_role:
        name: vmware_ops_vcenter_host_connection_test
      tags:
        - eco-vcenter-ci
        - integration-ci
